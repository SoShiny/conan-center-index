--- CMakeFilters.cmake
+++ CMakeFilters.cmake
@@ -63,10 +63,11 @@
       find_package (ZLIB NAMES ${ZLIB_PACKAGE_NAME}${HDF_PACKAGE_EXT} COMPONENTS static shared)
       if (NOT ZLIB_FOUND)
         find_package (ZLIB) # Legacy find
-        if (ZLIB_FOUND)
-          set (LINK_COMP_LIBS ${LINK_COMP_LIBS} ${ZLIB_LIBRARIES})
-        endif ()
       endif ()
+      if (ZLIB_FOUND)
+         set (LINK_COMP_LIBS ${LINK_COMP_LIBS} ${ZLIB_LIBRARIES})
+         set (LINK_COMP_SHARED_LIBS ${LINK_COMP_SHARED_LIBS} ${ZLIB_LIBRARIES})
+       endif ()
     endif ()
     if (ZLIB_FOUND)
       set (H5_HAVE_FILTER_DEFLATE 1)
@@ -123,14 +124,18 @@
     if (NOT SZIP_FOUND)
       find_package (SZIP NAMES ${SZIP_PACKAGE_NAME}${HDF_PACKAGE_EXT} COMPONENTS static shared)
       if (NOT SZIP_FOUND)
-        find_package (SZIP) # Legacy find
-        if (SZIP_FOUND)
-          set (LINK_COMP_LIBS ${LINK_COMP_LIBS} ${SZIP_LIBRARIES})
-        endif ()
+        find_package (szip CONFIG REQUIRED)
       endif ()
     endif ()
   endif ()
   if (SZIP_FOUND)
+    if (TARGET szip-shared)
+      set (LINK_COMP_SHARED_LIBS ${LINK_COMP_SHARED_LIBS} szip-shared)
+      set (LINK_COMP_LIBS ${LINK_COMP_LIBS} szip-shared)
+    else ()
+      set (LINK_COMP_SHARED_LIBS ${LINK_COMP_SHARED_LIBS} szip-static)
+      set (LINK_COMP_LIBS ${LINK_COMP_LIBS} szip-static)
+    endif ()
     set (H5_HAVE_FILTER_SZIP 1)
     set (H5_HAVE_SZLIB_H 1)
     set (H5_HAVE_LIBSZ 1)
